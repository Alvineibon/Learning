{"title":"Product SOW Screenboard v3","description":"## Title\n\nDescribe this dashboard. Add links to other dashboards, monitors, wikis,  and docs to help your teammates. Markdown is supported.\n\n- [This might link to a dashboard](#)\n- [This might link to a wiki](#)","widgets":[{"id":2348732762873480,"definition":{"title":"Nodes","background_color":"vivid_orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":1364190386018346,"definition":{"title":"non-eks asg avg","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.autoscaling.group_in_service_instances{$team,$cloud,!kube-worker:*} by {autoscalinggroupname}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":4758655204707958,"definition":{"title":"eks asg sum","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.autoscaling.group_in_service_instances{$team,$cloud,kube-worker:*,$kube-worker} by {kube-worker}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":1056835511116708,"definition":{"title":"","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"avg:aws.autoscaling.group_in_service_instances{$team,$cloud} by {autoscalinggroupname}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":0,"width":4,"height":2}}]},"layout":{"x":0,"y":0,"width":12,"height":3}},{"id":7535793547369978,"definition":{"title":"ELB","background_color":"vivid_yellow","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6313766176802550,"definition":{"title":"non-eks elb avg latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elb.latency{$team,$cloud,!kubernetes.io/service-name:*} by {loadbalancername,cloud}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":2174406250068871,"definition":{"title":"non-eks elb 5xx","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query3"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elb.httpcode_elb_5xx{$team,$cloud,!kubernetes.io/service-name:*} by {name,cloud}.as_count()","data_source":"metrics","name":"query3"},{"query":"avg:aws.elb.httpcode_backend_5xx{$team,$cloud,!kubernetes.io/service-name:*} by {name,cloud}.as_count()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":4508980753530418,"definition":{"title":"non-eks elb request count","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elb.request_count{$team,$cloud,!kubernetes.io/service-name:*} by {loadbalancername,cloud}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":7295721383347106,"definition":{"title":"eks elb avg latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elb.latency{$team,$cloud,kubernetes.io/service-name:*} by {kubernetes.io/service-name,createdby}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":7625500350530898,"definition":{"title":"eks elb 5xx","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query3"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elb.httpcode_elb_5xx{$team,$cloud,kubernetes.io/service-name:*} by {kubernetes.io/service-name,createdby}.as_count()","data_source":"metrics","name":"query3"},{"query":"avg:aws.elb.httpcode_backend_5xx{$team,$cloud,kubernetes.io/service-name:*} by {kubernetes.io/service-name,createdby}.as_count()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":5995470423356950,"definition":{"title":"eks elb request count","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elb.request_count{$team,$cloud,kubernetes.io/service-name:*} by {kubernetes.io/service-name,createdby}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":1172818267714544,"definition":{"title":"eks elb request count < 1000rps","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"clamp_max(query1, 1000)"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elb.request_count{$team,$cloud,kubernetes.io/service-name:*} by {kubernetes.io/service-name,createdby}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":8648178638963972,"definition":{"title":"eks elb request count < 200rps","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"clamp_max(query1, 200)"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elb.request_count{$team,$cloud,kubernetes.io/service-name:*} by {kubernetes.io/service-name,createdby}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":4,"width":4,"height":2}}]},"layout":{"x":0,"y":3,"width":12,"height":7}},{"id":3667570096711394,"definition":{"title":"CDN","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3361309066624075,"definition":{"title":"aws.cloudfront.5xx.error.rate","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"avg:aws.cloudfront.5xx_error_rate{$team,$cloud} by {name,distributionid,cloud}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":6141558268925730,"definition":{"title":"aws cf bytes downloaded (all)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"avg:aws.cloudfront.bytes_downloaded{$team,$cloud} by {name,distributionid,cloud}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":1869819183519836,"definition":{"title":"aws cf bytes downloaded (main)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"avg:aws.cloudfront.bytes_downloaded{name:prod-*} by {name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":3156114651051600,"definition":{"title":"aws.cloudfront.4xx.error.rate","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query2)"}],"response_format":"timeseries","queries":[{"query":"avg:aws.cloudfront.4xx_error_rate{$team,$cloud} by {name,cloud,distributionid}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":6094755620668815,"definition":{"title":"aws cf requests","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"avg:aws.cloudfront.requests{$team,$cloud} by {distributionid}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":3995425799956814,"definition":{"title":"aws cf requests (main)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.cloudfront.requests{name:prod*} by {name}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":2111796645121922,"definition":{"title":"aws cf 5xx (main)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.cloudfront.5xx_error_rate{name:prod*} by {name,cloud}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":7326388876052612,"definition":{"title":"aws cf 4xx (main)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.cloudfront.4xx_error_rate{name:prod*,!name:prod-beta-web-cf,!name:prod-appsapi-cf} by {name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":4,"width":4,"height":2}}]},"layout":{"x":0,"y":10,"width":12,"height":7}},{"id":6140972296171348,"definition":{"title":"API Gateway","background_color":"vivid_green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4691014110526968,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.apigateway.latency{$team,$cloud,$region} by {apiname}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":2222962004439620,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.apigateway.5xxerror{$team,$cloud,$region} by {apiname}.as_count()"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":93717329846970,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.apigateway.count{$team,$cloud,$region} by {apiname}.as_count()"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":8,"y":0,"width":4,"height":2}}]},"layout":{"x":0,"y":17,"width":12,"height":3}},{"id":8693255572548810,"definition":{"title":"RDS/DataBase/MongoAtlas","background_color":"blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":1047631754266300,"definition":{"title":"aws rds cpu utilization","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.rds.cpuutilization{$team,$cloud,$region} by {dbinstanceidentifier,region,cloud}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":8981670160944102,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"}],"response_format":"timeseries","queries":[{"query":"avg:aws.rds.write_iops{$team,$cloud,$region} by {dbinstanceidentifier,region,cloud}.as_count()","data_source":"metrics","name":"query1"},{"query":"avg:aws.rds.read_iops{$team,$cloud,$region} by {dbinstanceidentifier,region,cloud}.as_count()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":1077723008584747,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"}],"response_format":"timeseries","queries":[{"query":"avg:aws.rds.read_latency{$team,$cloud,$region} by {dbinstanceidentifier,region,cloud}","data_source":"metrics","name":"query1"},{"query":"avg:aws.rds.write_latency{$team,$cloud,$region} by {dbinstanceidentifier,region,cloud}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":6697182932778487,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:mongodb.atlas.system.cpu.norm.user{*} by {replicasetname}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":728224723705423,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:mongodb.atlas.system.disk.iops.writes{*} by {replicasetname}.as_count()"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":5773213385293848,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:mongodb.atlas.oplatencies.reads.avg{*} by {replicasetname}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}}]},"layout":{"x":0,"y":20,"width":12,"height":5}},{"id":4326898051226432,"definition":{"title":"Elasticache - Redis","background_color":"vivid_pink","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3444222417259272,"definition":{"title":"redis cpu usage","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.engine_cpuutilization{$team,$cloud,$region,engine:redis} by {replication_group,cloud,region}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":2990251034745670,"definition":{"title":"redis memory usage","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.database_memory_usage_percentage{$team,$cloud,$region,engine:redis} by {replication_group,cloud,region}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":2637586896325610,"definition":{"title":"aws redis network in","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.network_bytes_in{$team,$cloud,$region,engine:redis} by {replication_group,cloud,region}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":1606913259498314,"definition":{"title":"aws redis network out","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.network_bytes_out{$team,$cloud,$region,engine:redis} by {replication_group,cloud,region}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":7787467850224482,"definition":{"title":"aws redis evictions","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.evictions{$team,$cloud,$region,engine:redis} by {replication_group,cloud,region}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":2095224275483446,"definition":{"title":"aws redis new connection","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.new_connections{$team,$cloud,$region,engine:redis} by {replication_group,cloud,region}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":8301869798928052,"definition":{"title":"aws redis current connection","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.curr_connections{$team,$cloud,$region,engine:redis} by {replication_group,cloud,region}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":4,"width":4,"height":2}}]},"layout":{"x":0,"y":25,"width":12,"height":7}},{"id":2142273073873664,"definition":{"title":"Elasticache - Memcache","background_color":"vivid_green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":7522352761540420,"definition":{"title":"memcache cpu usage","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.cpuutilization{$team,$cloud,$region,engine:memcached} by {cloud,region,name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":3634112099198238,"definition":{"title":"aws memcache evictions","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.evictions{$team,$cloud,$region,engine:memcached} by {cloud,region,name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":2665602704595074,"definition":{"title":"aws memcache network in","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.network_bytes_in{$team,$cloud,$region,engine:memcached} by {cloud,region,name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":579581248658190,"definition":{"title":"aws memcache network out","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.network_bytes_out{$team,$cloud,$region,engine:memcached} by {cloud,region,name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":5574169294636512,"definition":{"title":"aws memcache curr connection","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.curr_connections{$team,$cloud,$region,engine:memcached} by {cloud,region,name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":4066964285567050,"definition":{"title":"aws memcache new connection","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.elasticache.new_connections{$team,$cloud,$region,engine:memcached} by {cloud,region,name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}}]},"layout":{"x":0,"y":32,"width":12,"height":5}},{"id":2112009135891258,"definition":{"title":"ElasticSearch","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4587397843316004,"definition":{"title":"es free storage","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"min:aws.es.free_storage_space{$cloud,$region} by {name,cloud,region}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":4591366562257513,"definition":{"title":"es cpu max","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:aws.es.cpuutilization{$cloud,$region} by {name,cloud,region}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":865312705815878,"definition":{"title":"es free storage min","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:aws.es.free_storage_space.minimum{$cloud,$region} by {name,cloud,region}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}}]},"layout":{"x":0,"y":37,"width":12,"height":3,"is_column_break":true}},{"id":574573839619576,"definition":{"title":"K8S","background_color":"vivid_purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2171484241814024,"definition":{"title":"Worker node CPU Usage","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:kubernetes.cpu.usage.total{$kube-worker} by {kube-worker,host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":4353869330734995,"definition":{"title":"Deployment CPU Usage non data","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:kubernetes.cpu.usage.total{$kube-worker,$deployment,!kube-worker:prod-data-*,!kube-worker:stg-data-*} by {kube_deployment,kube_namespace,kube-worker,kube_stateful_set,kube_daemon_set}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":8617399386041270,"definition":{"title":"Deployment CPU Usage","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:kubernetes.cpu.usage.total{$kube-worker,$deployment} by {kube_deployment,kube_namespace,kube-worker,kube_stateful_set,kube_daemon_set}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":6045013180684006,"definition":{"title":"Disk Usage","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:kubernetes.filesystem.usage{kube_cluster_name:prod-eks-cluster-apse1} by {kube_deployment,kube_namespace,kube_cluster_name,kube_daemon_set,kube_stateful_set}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":4238925658330465,"definition":{"title":"Traefik backend max latency","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"avg:traefik.backend.request.duration.max{$backend,$kube-worker} by {backend,ingress-deployment,kube-worker}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":1348182940442690,"definition":{"title":"Deployment Failure","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:kubernetes_state.deployment.replicas_unavailable{$deployment,$kube-worker} by {kube_deployment,kube_namespace,kube-worker}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":7339552883948779,"definition":{"title":"Traefik 4xx","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"sum:traefik.backend.request.total{kube-worker:prod-eks-cluster-apse1-worker,$backend,code:4*} by {backend,ingress-deployment,kube-worker}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":7457016512345364,"definition":{"title":"Traefik 4xx < 1k rps","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"clamp_max(default_zero(query1), 1000)"}],"response_format":"timeseries","queries":[{"query":"sum:traefik.backend.request.total{kube-worker:prod-eks-cluster-apse1-worker,$backend,code:4*} by {backend,ingress-deployment,kube-worker}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":7147095120477121,"definition":{"title":"Traefik 5xx","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"sum:traefik.backend.request.total{$backend,code:5*,$kube-worker} by {backend,kube-worker,ingress-deployment}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":4,"width":4,"height":2}},{"id":8567731500226312,"definition":{"title":"Network in per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.network.rx_bytes{$kube-worker} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":6,"width":4,"height":2}},{"id":5962378678501078,"definition":{"title":"Sum Kubernetes CPU requests per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.cpu.requests{$kube-worker} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"warm"},"display_type":"line"}],"custom_links":[]},"layout":{"x":4,"y":6,"width":4,"height":2}},{"id":5808783848654892,"definition":{"title":"Sum Kubernetes memory requests per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.memory.requests{$kube-worker} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"cool"},"display_type":"line"}],"custom_links":[]},"layout":{"x":8,"y":6,"width":4,"height":2}},{"id":524754058490938,"definition":{"title":"Disk reads per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.io.read_bytes{$kube-worker} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":8,"width":4,"height":2}},{"id":6132366142085766,"definition":{"title":"Network out per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.network.tx_bytes{$kube-worker} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"green"},"display_type":"line"}],"custom_links":[]},"layout":{"x":4,"y":8,"width":4,"height":2}},{"id":478532256353356,"definition":{"title":"Disk writes per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.io.write_bytes{$kube-worker} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":8,"y":8,"width":4,"height":2}}]},"layout":{"x":0,"y":40,"width":12,"height":11}},{"id":5992179310203348,"definition":{"title":"Deployment memory requests, limits and usage","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"formula":"query2"},{"formula":"query1"},{"formula":"query3"},{"formula":"query4"},{"formula":"query4 / query1 * 100","limit":{"count":500,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"avg:kubernetes.memory.working_set{$kube-worker} by {kube_namespace,kube_deployment}","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"avg:kubernetes.memory.requests{$kube-worker} by {kube_namespace,kube_deployment}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:kubernetes.memory.limits{$kube-worker} by {kube_namespace,kube_deployment}","data_source":"metrics","name":"query3","aggregator":"avg"},{"query":"max:kubernetes.memory.working_set{$kube-worker} by {kube_namespace,kube_deployment}","data_source":"metrics","name":"query4","aggregator":"max"}]}]},"layout":{"x":0,"y":0,"width":12,"height":5}},{"id":4454895877106728,"definition":{"title":"Deployment CPU requests, limits and usage","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"formula":"query2"},{"formula":"query1"},{"formula":"query3"},{"formula":"query4"},{"formula":"query4 / query1 * 100","limit":{"count":500,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"avg:kubernetes.cpu.usage.total{$kube-worker} by {kube_namespace,kube_deployment}","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"avg:kubernetes.cpu.requests{$kube-worker} by {kube_namespace,kube_deployment}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:kubernetes.cpu.limits{$kube-worker} by {kube_namespace,kube_deployment}","data_source":"metrics","name":"query3","aggregator":"avg"},{"query":"max:kubernetes.cpu.usage.total{$kube-worker} by {kube_namespace,kube_deployment}","data_source":"metrics","name":"query4","aggregator":"max"}]}]},"layout":{"x":0,"y":5,"width":12,"height":5}},{"id":4512646254217794,"definition":{"title":"Datadog Usage","background_color":"pink","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6159578148028884,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:datadog.estimated_usage.hosts{*}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":6120912664644360,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:datadog.estimated_usage.containers{*}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":6831846474830636,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:datadog.estimated_usage.metrics.custom{*}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":5668681214269806,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:datadog.estimated_usage.serverless.aws_lambda_functions{*}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":2}}]},"layout":{"x":0,"y":61,"width":12,"height":5}},{"id":7830257002349776,"definition":{"title":"SLO","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4600663031062384,"definition":{"title":"","title_size":"16","title_align":"left","type":"slo","slo_id":"a25895da072b52cead4cae7108faacd4","view_type":"detail","view_mode":"both","time_windows":["7d"],"show_error_budget":true,"global_time_target":"0"},"layout":{"x":0,"y":0,"width":11,"height":4}}]},"layout":{"x":0,"y":0,"width":11,"height":5}}],"template_variables":[{"name":"team","prefix":"team","available_values":[],"default":"*"},{"name":"cloud","prefix":"cloud","available_values":[],"default":"*"},{"name":"backend","prefix":"backend","available_values":[],"default":"*"},{"name":"deployment","prefix":"kube_deployment","available_values":[],"default":"*"},{"name":"region","prefix":"region","available_values":["ap-southeast-1","us-west-2","us-east-1"],"default":"ap-southeast-1"},{"name":"kube-worker","prefix":"kube-worker","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"template_variable_presets":[{"name":"prod-1w","template_variables":[{"name":"cloud","value":"prod"}]}],"reflow_type":"fixed","id":"2xf-h4c-95d"}